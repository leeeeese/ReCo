# ReCo 개발 작업 목록

프론트엔드, 백엔드, AI 에이전트를 통틀어 추가로 필요한 개발 작업 목록입니다.

## 🔴 우선순위 높음 (즉시 필요)

### 1. 로깅 시스템 구축
**현재 상태**: `print()` 문만 사용 중
**필요 작업**:
- Python `logging` 모듈 통합
- 로그 레벨 설정 (DEBUG, INFO, WARNING, ERROR)
- 파일 로그 및 콘솔 로그 분리
- 구조화된 로그 포맷 (JSON)
- 에이전트별 로그 분리

**파일**: `server/utils/logger.py` 생성 필요

### 2. 에러 처리 및 타임아웃 강화
**현재 상태**: 기본적인 try-except만 있음
**필요 작업**:
- 워크플로우 타임아웃 설정 (30-60초)
- LLM API 호출 재시도 로직
- 데이터베이스 연결 타임아웃
- 프론트엔드 타임아웃 처리
- 사용자 친화적 에러 메시지

**파일**: 
- `server/routers/workflow.py` 수정
- `app/frontend/src/utils/api.ts` 수정

### 3. 입력 검증 강화
**현재 상태**: Pydantic 기본 검증만 있음
**필요 작업**:
- `search_query` 최소/최대 길이 검증
- 가격 범위 검증 (min < max)
- 선호도 값 범위 검증 (0-100)
- SQL Injection 방지 확인
- XSS 방지 확인

**파일**: `server/db/schemas.py` 수정

### 4. 워크플로우 진행 상황 실시간 업데이트
**현재 상태**: 프론트엔드에서 로딩만 표시
**필요 작업**:
- Server-Sent Events (SSE) 또는 WebSocket 구현
- 각 에이전트 단계별 진행 상황 전송
- 프론트엔드에서 실시간 업데이트
- 진행률 표시

**파일**:
- `server/routers/workflow.py` - SSE 엔드포인트 추가
- `app/frontend/src/components/ChatInterface.tsx` - SSE 클라이언트 추가

---

## 🟡 우선순위 중간 (중요하지만 급하지 않음)

### 5. 테스트 코드 작성
**현재 상태**: 테스트 코드 없음
**필요 작업**:
- 단위 테스트 (각 에이전트)
- 통합 테스트 (워크플로우 전체)
- API 테스트 (FastAPI)
- 프론트엔드 컴포넌트 테스트
- E2E 테스트

**파일**:
- `tests/` 디렉토리 생성
- `pytest` 설정
- `jest` 설정 (프론트엔드)

### 6. 캐싱 시스템
**현재 상태**: 캐싱 없음
**필요 작업**:
- Redis 또는 in-memory 캐시
- 시세 데이터 캐싱 (1시간)
- 페르소나 분류 결과 캐싱
- 검색 결과 캐싱 (동일 쿼리)

**파일**: `server/utils/cache.py` 생성

### 7. 데이터베이스 연결 풀 최적화
**현재 상태**: 기본 설정만 있음
**필요 작업**:
- 연결 풀 크기 설정
- 연결 타임아웃 설정
- 재연결 로직
- 연결 상태 모니터링

**파일**: `server/db/database.py` 수정

### 8. API Rate Limiting
**현재 상태**: Rate limiting 없음
**필요 작업**:
- 사용자별 요청 제한
- IP 기반 제한
- 시간당 요청 수 제한
- FastAPI middleware 추가

**파일**: `server/middleware/rate_limit.py` 생성

### 9. 환경 변수 검증 강화
**현재 상태**: 기본 검증만 있음
**필요 작업**:
- 서버 시작 시 필수 환경 변수 검증
- 타입 검증
- 범위 검증
- 누락 시 명확한 에러 메시지

**파일**: `server/utils/config.py` 수정

### 10. 프론트엔드 에러 바운더리
**현재 상태**: 기본 에러 처리만 있음
**필요 작업**:
- React Error Boundary 구현
- 전역 에러 핸들러
- 에러 리포팅 (선택사항)
- 사용자 친화적 에러 UI

**파일**: `app/frontend/src/components/ErrorBoundary.tsx` 생성

---

## 🟢 우선순위 낮음 (개선사항)

### 11. 모니터링 및 메트릭
**필요 작업**:
- Prometheus 메트릭 수집
- 응답 시간 추적
- 에러율 추적
- 에이전트별 성능 메트릭
- 대시보드 구성

### 12. 성능 최적화
**필요 작업**:
- 데이터베이스 쿼리 최적화
- N+1 쿼리 문제 해결
- 프론트엔드 번들 크기 최적화
- 이미지 최적화
- 코드 스플리팅

### 13. 보안 강화
**필요 작업**:
- API 키 암호화
- HTTPS 강제
- CORS 설정 세분화
- 입력 sanitization
- CSRF 보호

### 14. 문서화 개선
**필요 작업**:
- API 문서 자동 생성 (OpenAPI)
- 코드 주석 보강
- 아키텍처 다이어그램
- 배포 가이드

### 15. CI/CD 파이프라인
**필요 작업**:
- GitHub Actions 설정
- 자동 테스트 실행
- 자동 배포
- 코드 품질 검사

### 16. 워크플로우 최적화
**필요 작업**:
- 병렬 처리 최적화
- 불필요한 API 호출 제거
- LLM 프롬프트 최적화
- 응답 시간 단축

### 17. 사용자 경험 개선
**필요 작업**:
- 로딩 애니메이션 개선
- 스켈레톤 UI
- 무한 스크롤
- 검색 히스토리 저장
- 즐겨찾기 기능

### 18. 데이터베이스 마이그레이션
**필요 작업**:
- Alembic 설정
- 마이그레이션 스크립트
- 롤백 기능
- 버전 관리

---

## 📋 구현 우선순위 추천

### Phase 1 (즉시)
1. 로깅 시스템 구축
2. 에러 처리 및 타임아웃 강화
3. 입력 검증 강화

### Phase 2 (1주일 내)
4. 워크플로우 진행 상황 실시간 업데이트
5. 테스트 코드 작성 (기본)
6. 캐싱 시스템 (기본)

### Phase 3 (1개월 내)
7. 데이터베이스 연결 풀 최적화
8. API Rate Limiting
9. 프론트엔드 에러 바운더리
10. 모니터링 및 메트릭

### Phase 4 (장기)
11. 성능 최적화
12. 보안 강화
13. CI/CD 파이프라인
14. 문서화 개선

---

## 🛠️ 기술 스택 제안

### 로깅
- Python: `structlog` 또는 `loguru`
- 프론트엔드: `winston` 또는 기본 `console`

### 캐싱
- Redis (프로덕션)
- `functools.lru_cache` (개발)

### 테스트
- 백엔드: `pytest`, `pytest-asyncio`
- 프론트엔드: `vitest`, `@testing-library/react`

### 모니터링
- Prometheus + Grafana
- 또는 간단한 메트릭 수집

---

## 💡 참고사항

- 각 작업은 독립적으로 구현 가능
- 우선순위는 프로젝트 목표에 따라 조정 가능
- 테스트 코드는 점진적으로 추가 권장
- 프로덕션 배포 전에는 최소한 Phase 1-2 완료 권장

