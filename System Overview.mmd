---
config:
  theme: default
  layout: elk
---
flowchart TB
 subgraph PresentationLayer["Presentation Layer / Frontend UI"]
        user["사용자 입력 / Browser UI"]
        reactUI["React Frontend / Session & UI Rendering"]
  end
 subgraph ApplicationLayer["Application Layer / FastAPI Backend & Control"]
        fastapi["FastAPI Backend / Request Routing & Control Flow"]
        initNode["Init Node / Query Normalization & Context Extraction"]
        orchestrator["Orchestrator Agent / Result Aggregation & Ranking"]
  end
 subgraph ReasoningLayer["Reasoning Layer / LangGraph Agentic Pipeline"]
        product["Product Agent / 상품 특성 분석"]
        reliability["Reliability Agent / 신뢰도 분석"]
  end
 subgraph External["External Systems"]
        db["Database / Product & History"]
        llm["LLM API / OpenAI"]
  end
    user --> reactUI
    reactUI -- JSON Request --> fastapi
    fastapi --> initNode & reactUI
    initNode --> product & reliability
    product -- 상품·거래 정보 조회 --> db
    reliability -- 판매자·리스크 정보 조회 --> db
    product -- LLM 기반 상품 특성 추론 --> llm
    reliability -- LLM 기반 신뢰도 추론 --> llm
    product --> orchestrator
    reliability --> orchestrator
    orchestrator -- 최종 추천 응답 --> fastapi